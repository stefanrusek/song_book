{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://songbook.example.com/schemas/hymn-data.json",
  "title": "Polish SDA Hymnal Data",
  "description": "Schema for the complete Polish SDA hymnal data structure (hymns.json)",
  "type": "object",
  "required": ["metadata", "categories", "hymns"],
  "properties": {
    "metadata": {
      "type": "object",
      "required": ["version", "totalHymns", "generatedAt", "source"],
      "properties": {
        "version": {
          "type": "string",
          "description": "Version of the hymnal",
          "example": "2005"
        },
        "totalHymns": {
          "type": "integer",
          "const": 700,
          "description": "Total number of hymns (must be 700)"
        },
        "generatedAt": {
          "type": "string",
          "format": "date-time",
          "description": "ISO 8601 timestamp of data generation"
        },
        "source": {
          "type": "string",
          "description": "Source markdown filename",
          "example": "spiewajmy_panu_2005.md"
        }
      }
    },
    "categories": {
      "type": "array",
      "minItems": 9,
      "maxItems": 9,
      "description": "All 9 major categories from table of contents",
      "items": {
        "$ref": "#/definitions/category"
      }
    },
    "hymns": {
      "type": "array",
      "minItems": 700,
      "maxItems": 700,
      "description": "All 700 hymns",
      "items": {
        "$ref": "#/definitions/hymn"
      }
    }
  },
  "definitions": {
    "category": {
      "type": "object",
      "required": ["number", "name", "displayName", "subcategories"],
      "properties": {
        "number": {
          "type": "string",
          "enum": ["I", "II", "III", "IV", "V", "VI", "VII", "VIII", "IX"],
          "description": "Roman numeral for major category"
        },
        "name": {
          "type": "string",
          "description": "Category name in Polish",
          "examples": ["NABOZENSTWO", "ZYCIE I DZIALALNOSC JEZUSA"]
        },
        "displayName": {
          "type": "string",
          "pattern": "^(I|II|III|IV|V|VI|VII|VIII|IX)\\. .+$",
          "description": "Full display name with Roman numeral prefix",
          "examples": ["I. NABOZENSTWO", "III. POWTORNE PRZYJSCIE JEZUSA"]
        },
        "subcategories": {
          "type": "array",
          "minItems": 1,
          "description": "Subcategories within this major category",
          "items": {
            "$ref": "#/definitions/subcategory"
          }
        }
      }
    },
    "subcategory": {
      "type": "object",
      "required": ["number", "name", "hymnRange"],
      "properties": {
        "number": {
          "type": "integer",
          "minimum": 1,
          "maximum": 40,
          "description": "Subcategory number (1-40)"
        },
        "name": {
          "type": "string",
          "minLength": 1,
          "description": "Subcategory name in Polish",
          "examples": ["Uwielbienie Boga i dziekczynienie", "Pierwszy adwent"]
        },
        "hymnRange": {
          "type": "object",
          "required": ["start", "end"],
          "properties": {
            "start": {
              "type": "integer",
              "minimum": 1,
              "maximum": 700,
              "description": "First hymn number in range (inclusive)"
            },
            "end": {
              "type": "integer",
              "minimum": 1,
              "maximum": 700,
              "description": "Last hymn number in range (inclusive)"
            }
          }
        }
      }
    },
    "hymn": {
      "type": "object",
      "required": ["number", "title", "key", "author", "translator", "verses", "chorus", "category", "subcategory", "fullText"],
      "properties": {
        "number": {
          "type": "integer",
          "minimum": 1,
          "maximum": 700,
          "description": "Unique hymn number"
        },
        "title": {
          "type": "string",
          "minLength": 1,
          "description": "Polish title of the hymn",
          "examples": ["Wielbij Mocarza i Krola wszechswiata", "Boze, oto my, Twe dzieci"]
        },
        "key": {
          "type": ["string", "null"],
          "description": "Musical key signature (null if not specified)",
          "examples": ["F", "Es", "G", "D", "C", null]
        },
        "author": {
          "type": ["string", "null"],
          "description": "Original author (null if unknown or anonymous)",
          "examples": ["J. Neander (1650-1680)", null]
        },
        "translator": {
          "type": ["string", "null"],
          "description": "Polish translator (null if not applicable)",
          "examples": ["Stefan Kowalski", null]
        },
        "verses": {
          "type": "array",
          "minItems": 1,
          "description": "Array of verse texts (at least one verse required)",
          "items": {
            "type": "string",
            "minLength": 1
          }
        },
        "chorus": {
          "type": ["string", "null"],
          "description": "Chorus/Refren text (null if no chorus)",
          "examples": ["Panie, ozyw nas Swa moca, Obecnoscia uswiec Swa.", null]
        },
        "category": {
          "type": "string",
          "pattern": "^(I|II|III|IV|V|VI|VII|VIII|IX)\\. .+$",
          "description": "Major category display name",
          "examples": ["I. NABOZENSTWO", "III. POWTORNE PRZYJSCIE JEZUSA"]
        },
        "subcategory": {
          "type": "object",
          "required": ["number", "name"],
          "description": "Subcategory reference",
          "properties": {
            "number": {
              "type": "integer",
              "minimum": 1,
              "maximum": 40
            },
            "name": {
              "type": "string",
              "minLength": 1
            }
          }
        },
        "fullText": {
          "type": "string",
          "minLength": 1,
          "description": "Pre-computed full text (title + verses + chorus) for search indexing"
        }
      }
    }
  }
}
